name: "Requirements Extraction Pipeline"
description: "Extract requirements and sub-divide into values, units, and specifications"
version: "1.0.0"

global_config:
  model_id: "gpt-4o-mini"
  api_key: null
  format_type: "json"
  max_char_buffer: 8000
  temperature: 0.3
  fence_output: null
  use_schema_constraints: true
  batch_length: 4
  max_workers: 6
  additional_context: null
  resolver_params: {}
  language_model_params:
    provider_config:
      provider_type: "openai"
      base_url: "https://api.openai.com/v1"
      model: "gpt-4o-mini"
      api_key: null
      headers: {}
      extra_params: {}
  debug: false
  model_url: null
  extraction_passes: 1
  enable_multipass: false
  multipass_min_extractions: 1
  multipass_quality_threshold: 0.3

steps:
  - id: "extract_requirements"
    name: "Extract Requirements"
    description: "Extract all 'shall' statements and requirements from the document"
    prompt: "Extract all requirements, 'shall' statements, and specifications from the text. Include the complete statement."
    output_field: "requirements"
    depends_on: []
    examples:
      - text: "The system shall process 100 transactions per second and maintain 99.9% uptime."
        extractions:
          - extraction_class: "requirement"
            extraction_text: "The system shall process 100 transactions per second and maintain 99.9% uptime."

  - id: "extract_values"
    name: "Extract Values"
    description: "Extract numeric values, units, and specifications from requirements"
    prompt: "From this requirement, extract all numeric values and their associated units or specifications."
    output_field: "values"
    depends_on: ["extract_requirements"]
    filter:
      class_filter: "requirement"
      max_items: null
    examples:
      - text: "The system shall process 100 transactions per second and maintain 99.9% uptime."
        extractions:
          - extraction_class: "value"
            extraction_text: "100"
          - extraction_class: "unit"
            extraction_text: "transactions per second"
          - extraction_class: "value"
            extraction_text: "99.9"
          - extraction_class: "unit"
            extraction_text: "%"

  - id: "extract_specifications"
    name: "Extract Specifications"
    description: "Extract detailed specifications and constraints from requirements"
    prompt: "Extract detailed specifications, constraints, and performance requirements from this text."
    output_field: "specifications"
    depends_on: ["extract_requirements"]
    filter:
      class_filter: "requirement"
      max_items: null
    examples:
      - text: "The system shall process 100 transactions per second and maintain 99.9% uptime."
        extractions:
          - extraction_class: "specification"
            extraction_text: "process 100 transactions per second"
          - extraction_class: "constraint"
            extraction_text: "maintain 99.9% uptime"
